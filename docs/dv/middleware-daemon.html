<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Obol Network RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Obol Network Atom Feed"><title data-react-helmet="true">Middleware Daemon | Obol Network</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.obol.tech//docs/dv/middleware-daemon"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:image" content="/img/obol_og_image.png"><meta data-react-helmet="true" property="og:image:width" content="1200"><meta data-react-helmet="true" property="og:image:height" content="630"><meta data-react-helmet="true" property="og:title" content="Middleware Daemon | Obol Network"><meta data-react-helmet="true" name="description" content="Deployment Architecture for a Distributed Validator Client"><meta data-react-helmet="true" property="og:description" content="Deployment Architecture for a Distributed Validator Client"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.obol.tech//docs/dv/middleware-daemon"><link data-react-helmet="true" rel="alternate" href="https://docs.obol.tech//docs/dv/middleware-daemon" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.obol.tech//docs/dv/middleware-daemon" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8c0e309d.css">
<link rel="preload" href="/assets/js/runtime~main.4e2ce3fa.js" as="script">
<link rel="preload" href="/assets/js/main.0ee88aba.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ObolIcon.svg" alt="Obol Network Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/ObolIcon.svg" alt="Obol Network Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Obol Network</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a href="https://blog.obol.tech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/obolnetwork/obol-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9" style="margin-left:2px">🌙</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9" style="margin-left:1px">☀</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">👋 Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/key-concepts">💡 Key Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">🚣  Distributed Validators</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/introducing-charon">Introducing Charon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/validator-creation">Distributed Validator Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/charon_internals">Charon Internals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/dv/middleware-daemon">Middleware Daemon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/peer-discovery">Peer Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/p2p-interface">P2P interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dv/distributed-validator-cluster-manifest">Distributed Validator Cluster Manifest</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">🔐   Key Generation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dvk/distributed-validator-keys">Distributed Validator Keys</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">📜   Smart Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sc/introducing-obol-managers">Obol Manager Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">❓ FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/testnet">🧪 Testnets</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Middleware Daemon</h1></header><p>The Charon daemon serves as a consensus layer API middleware, and connects to the Obol peer-to-peer network to discover its counterparty charon nodes.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="operation">Operation<a aria-hidden="true" class="hash-link" href="#operation" title="Direct link to heading">​</a></h3><p>The middleware strives to be stateless and statically configured through 777 file systems. The lack of a control-plane API for online reconfiguration is deliberate to keep operations simple and secure by default.</p><p>A single instance of the middleware can participate in multiple distributed validator clusters. The amount of validators per middleware is bound by risk management and hardware limits (CPU, memory, bandwidth), but there is no hardcoded limit.</p><p>The daemon offers a config reload instruction through Unix signals which is useful to join or leave Obol clusters on-the-fly without interruption.</p><p>The <em>charon</em> package will initially be available as a Docker image and through binary builds. An APT package with a systemd integration is planned.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="initialization">Initialization<a aria-hidden="true" class="hash-link" href="#initialization" title="Direct link to heading">​</a></h3><p>An instance of Charon requires the following pieces of information at minimum in order to operate.</p><ul><li>A DV cluster manifest file in the to be confirmed EIP format. This file contains the required information a DV client needs for joining a Distributed Validator Cluster. This file includes:<ul><li>The total number of shares of the key and the required threshold for reconstruction.</li><li>An SECP256K1 key pair in an ENR format for Obol consensus messages, this key is signed by the corresponding operators validator key share to legitimise it.</li><li>A list of all ENR public keys of other operators participating in the cluster.</li><li>The group public keys representing each distributed validator in the cluster to the Ethereum network.</li></ul></li><li>Access to an Ethereum Consensus API<ul><li>It is recommended to run at least one Ethereum Consensus client for each Charon middleware client.</li><li>Any <a href="https://ethereum.github.io/beacon-APIs/" target="_blank" rel="noopener noreferrer">compliant</a> Beacon node implementation should work – try to establish client diversity.</li><li>These consensus clients need to be connected to at least one Ethereum Execution clients for block production.</li></ul></li><li>The public IP address and port the charon client will operate on<ul><li>For now, we make the (naive) assumption that the address will be static.</li><li>Charon will attempt to auto-discover its address on first use by enumerating network interfaces and using <a href="https://datatracker.ietf.org/doc/html/rfc5389" target="_blank" rel="noopener noreferrer">STUN</a>.</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/obolnetwork/obol-docs/edit/main/website/docs/dv/04_middleware-daemon.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dv/charon_internals"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Charon Internals</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dv/peer-discovery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Peer Discovery<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#operation" class="table-of-contents__link toc-highlight">Operation</a></li><li><a href="#initialization" class="table-of-contents__link toc-highlight">Initialization</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Intro to Obol</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dv/introducing-charon">Charon</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dvk/distributed-validator-keys">DV Launchpad</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/n6ebKsX46w" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/obolnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.obol.tech/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/obolnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://obol.tech/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="https://obol.tech/ObolIcon.png" alt="Obol Network Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo" width="30px" height="30px"><img src="https://obol.tech/ObolIconWhite.png" alt="Obol Network Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo" width="30px" height="30px"></a></div><div class="footer__copyright">Copyright © 2022 Obol Labs, Inc. </div></div></div></footer></div>
<script src="/assets/js/runtime~main.4e2ce3fa.js"></script>
<script src="/assets/js/main.0ee88aba.js"></script>
</body>
</html>